<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Linear Regression Calculator</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><rect x='2' y='2' width='60' height='60' rx='8' fill='%233498db' stroke='%232980b9' stroke-width='2'/><line x1='8' y1='52' x2='56' y2='52' stroke='%23f8f9fa' stroke-width='1' stroke-opacity='0.6'/><line x1='8' y1='40' x2='56' y2='40' stroke='%23f8f9fa' stroke-width='1' stroke-opacity='0.6'/><line x1='8' y1='28' x2='56' y2='28' stroke='%23f8f9fa' stroke-width='1' stroke-opacity='0.6'/><line x1='8' y1='16' x2='56' y2='16' stroke='%23f8f9fa' stroke-width='1' stroke-opacity='0.6'/><line x1='20' y1='8' x2='20' y2='56' stroke='%23f8f9fa' stroke-width='1' stroke-opacity='0.6'/><line x1='32' y1='8' x2='32' y2='56' stroke='%23f8f9fa' stroke-width='1' stroke-opacity='0.6'/><line x1='44' y1='8' x2='44' y2='56' stroke='%23f8f9fa' stroke-width='1' stroke-opacity='0.6'/><line x1='8' y1='52' x2='56' y2='52' stroke='%23ffffff' stroke-width='2'/><line x1='8' y1='8' x2='8' y2='52' stroke='%23ffffff' stroke-width='2'/><line x1='8' y1='44' x2='56' y2='12' stroke='%232ecc71' stroke-width='3'/><circle cx='14' cy='40' r='3' fill='%23e74c3c'/><circle cx='22' cy='36' r='3' fill='%23e74c3c'/><circle cx='32' cy='24' r='3' fill='%23e74c3c'/><circle cx='38' cy='20' r='3' fill='%23e74c3c'/><circle cx='48' cy='16' r='3' fill='%23e74c3c'/><text x='32' y='61' font-family='Arial, sans-serif' font-size='10' font-weight='bold' text-anchor='middle' fill='%23ffffff'>y=mx+b</text></svg>" type="image/svg+xml">
 
  <style>

:root {
    --primary-color: #3498db;
    --primary-dark: #2980b9;
    --secondary-color: #2ecc71;
    --secondary-dark: #27ae60;
    --accent-color: #e74c3c;
    --text-color: #333;
    --light-color: #f8f9fa;
    --border-color: #ddd;
    --shadow: 0 2px 5px rgba(0,0,0,0.1);
    --transition: all 0.3s ease;
  }
  
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: var(--text-color);
    background-color: #f5f7fa;
    padding: 20px;
    max-width: 800px;
    margin: 0 auto;
  }
  nav {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 30px;
    background-color: rgba(52, 152, 219, 0.1); 
    flex-wrap: wrap;
  }
  
  nav a {
    text-decoration: none;
    color: var(--primary-color);
    font-weight: 600;
    padding: 8px 15px;
    border-radius: 5px;
    transition: var(--transition);
    border: 2px solid transparent;
  }
  
  nav a:hover {
    background-color: rgba(52, 152, 219, 0.1);
    border-color: var(--primary-color);
  }
  
  .page-header {
    text-align: center;
    margin-bottom: 30px;
    color: var(--primary-dark);
    padding-bottom: 15px;
    border-bottom: 2px solid var(--primary-color);
  }
  

  
  .dynamicRows {
    background-color: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: var(--shadow);
    margin-bottom: 30px;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
  }
  
  .dynamicRows label {
    display: block;
    margin-bottom: 15px;
    font-weight: 600;
    font-size: 18px;
    color: var(--primary-dark);
  }
  
  input[type="number"], input[type="text"] {
    padding: 10px 15px;
    border: 2px solid var(--border-color);
    border-radius: 5px;
    font-size: 16px;
    width: 100%;
    max-width: 300px;
    transition: var(--transition);
  }
  
  input[type="number"]:focus, input[type="text"]:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
  }
  
  .container {
    background-color: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: var(--shadow);
    margin-bottom: 30px;
    overflow-x: auto;
  }
  
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
    border: none;
  }
  
  th, td {
    padding: 12px 15px;
    text-align: center;
    border: none;
  }
  
  thead {
    background-color: var(--primary-color);
    color: white;
  }
  
  th {
    font-weight: 600;
  }
  
  
  tbody tr {
    border-bottom: 1px solid var(--border-color);
    transition: var(--transition);
  }
  
  tbody tr:hover {
    background-color: rgba(52, 152, 219, 0.05);
  }
  
  td input {
    max-width: 100px;
    margin: 0 auto;
  }
  
  .calculatebtn {
    text-align: center;
    margin-top: 20px;
  }
  
  input[type="submit"], button {
    background-color: var(--primary-color);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    transition: var(--transition);
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  input[type="submit"]:hover, button:hover {
    background-color: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  
  .result {
    background-color: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: var(--shadow);
    margin-bottom: 30px;
  }
  
  .resultField {
    font-size: 18px;
    line-height: 1.8;
  }
  
  #newCalcBtn {
    background-color: var(--secondary-color);
    margin-top: 20px;
  }
  
  #newCalcBtn:hover {
    background-color: var(--secondary-dark);
  }
  
  .error-message {
    color: var(--accent-color);
    padding: 15px;
    background-color: rgba(231, 76, 60, 0.1);
    border-radius: 5px;
    margin-bottom: 15px;
  }
  
  .results-container {
    background-color: rgba(46, 204, 113, 0.1);
    padding: 20px;
    border-radius: 8px;
    border-left: 5px solid var(--secondary-color);
  }
  
  .results-heading {
    margin-bottom: 15px;
    color: var(--secondary-dark);
  }
  
  .regression-line {
    margin-top: 15px;
    font-size: 20px;
  }
  
  .fraction {
    display: inline-block;
    text-align: center;
    vertical-align: middle;
  }
  
  .fraction-top {
    border-bottom: 1px solid black;
  }
  
  @media (max-width: 768px) {
    .container, .result, .dynamicRows {
      padding: 20px;
    }
    
    th, td {
      padding: 8px;
      font-size: 14px;
    }
    
    .resultField {
      font-size: 16px;
    }
    
    input[type="submit"], button {
      padding: 10px 20px;
    }
  }
  
  @media (max-width: 480px) {
    th, td {
      padding: 6px 4px;
      font-size: 13px;
    }
    
    input[type="text"] {
      max-width: 70px;
      padding: 8px;
    }
    
    .page-header {
      font-size: 24px;
    }
    
    .dynamicRows label {
      font-size: 16px;
    }
  }

  </style>
</head>
<body>
 

  <nav>
    <a href="https://github.com/muz1058" target="_blank">My GitHub</a>
    <a href="https://www.linkedin.com/in/muzaffar-ali-1177672a6" target="_blank">My LinkedIn</a>
  </nav>
  <h1 class="page-header">Linear Regression Calculator</h1>
  
  <div class="dynamicRows">
    <label for="NumberOfRows">Enter Number of Data Points</label>
    <input type="number" id="NumberOfRows" min="1" required placeholder="e.g., 5">
  </div>
  
  <div class="container">
    <table>
      <thead class="tableHeader">
      </thead>
      <tbody id="dataBody">
      </tbody>
    </table>
    <div class="calculatebtn">
    </div>
  </div>

  <div class="result">
    <output class="resultField"></output>
  </div>

  <script >
const body = document.querySelector("body");
const dynamicRows = document.querySelector(".dynamicRows");
const numberOfRows = document.getElementById("NumberOfRows");
const tableHeader = document.querySelector(".tableHeader");
const calculateButtonContainer = document.querySelector(".calculatebtn");
const resultField = document.querySelector(".resultField");

let submitbtn = document.createElement("input");
submitbtn.type = 'submit';
submitbtn.value = 'Calculate';
submitbtn.id = 'calculate';

function addArray(array) {
  return array.reduce((sum, val) => sum + val, 0);
}

function average(array) {
  return addArray(array) / array.length;
}


function cleanUpPredictionElements() {
 
  const predictionInputs = document.querySelectorAll("#predictionInput");
  const predictionResults = document.querySelectorAll(".prediction-result");
  
  predictionInputs.forEach(input => input.remove());
  predictionResults.forEach(result => result.remove());
}

numberOfRows.addEventListener('keydown', function (e) {
  if (e.key === "Enter") {
    const rows = parseInt(numberOfRows.value);
    if (isNaN(rows) || rows < 1) return;
    tableHeader.innerHTML = `
      <tr>
        <th>SR</th>
        <th>X</th>
        <th>Y</th>
      </tr>
    `;
    const dataBody = document.getElementById("dataBody");
    dataBody.innerHTML = "";

    for (let i = 1; i <= rows; i++) {
      const row = document.createElement("tr");
      row.innerHTML = `
        <th>${i}</th>
        <td><input class="x" type="text" required placeholder="X${i}"></td>
        <td><input class="y" type="text" required placeholder="Y${i}"></td>
      `;
      dataBody.appendChild(row);
    }

    if (!document.getElementById("calculate")) {
      calculateButtonContainer.appendChild(submitbtn);
    }

    if (dynamicRows && body.contains(dynamicRows)) {
      body.removeChild(dynamicRows);
    }
 
    submitbtn.addEventListener("click", function (e) {
      e.preventDefault();

      const xInputs = document.querySelectorAll(".x");
      const yInputs = document.querySelectorAll(".y");

      const xArray = [];
      const yArray = [];

      xInputs.forEach(input => {
        const val = parseFloat(input.value);
        if (!isNaN(val)) xArray.push(val);
      });

      yInputs.forEach(input => {
        const val = parseFloat(input.value);
        if (!isNaN(val)) yArray.push(val);
      });

      if (xArray.length !== rows || yArray.length !== rows) {
        resultField.innerHTML = `<div class="error-message">Please enter valid and complete X and Y values.</div>`;
        return;
      }

      const xMean = average(xArray);
      const yMean = average(yArray);

      let numerator = 0;
      let denominator = 0;

      tableHeader.innerHTML = `
        <tr>
          <th>SR</th>
          <th>x</th>
          <th>y</th>
          <th>x−x̄</th>
          <th>y−ȳ</th>
          <th>(x−x̄)(y−ȳ)</th>
          <th>(x−x̄)²</th>
        </tr>
      `;
      const dataBody = document.getElementById("dataBody");
      dataBody.innerHTML = "";

      for (let i = 0; i < rows; i++) {
        const x = xArray[i];
        const y = yArray[i];
        const xDiff = x - xMean;
        const yDiff = y - yMean;
        const xyProduct = xDiff * yDiff;
        const xSquare = xDiff * xDiff;

        numerator += xyProduct;
        denominator += xSquare;

        const row = document.createElement("tr");
        row.innerHTML = `
          <th>${i + 1}</th>
          <td>${x.toFixed(4)}</td>
          <td>${y.toFixed(4)}</td>
          <td>${xDiff.toFixed(4)}</td>
          <td>${yDiff.toFixed(4)}</td>
          <td>${xyProduct.toFixed(4)}</td>
          <td>${xSquare.toFixed(4)}</td>
        `;
        dataBody.appendChild(row);
      }

      const m = numerator / denominator;
      const c = yMean - m * xMean;

      resultField.innerHTML = `
        <div class="results-container">
          <h3 class="results-heading">Calculation Results</h3>
          <p><b>&#8721;(x−x̄)(y−ȳ) =</b> ${numerator.toFixed(4)}</p>
          <p><b>&#8721;(x−x̄)² =</b> ${denominator.toFixed(4)}</p>
         
          <span>
            <b>m = </b>
            <span class="fraction">
              <div class="fraction-top">${numerator.toFixed(4)}</div>
              <div>${denominator.toFixed(4)}</div>
            </span>
            <span style="margin-left: 10px;"><b>= ${m.toFixed(4)}</b></span>
          </span><br>
          <p class="regression-line"><b>Regression Line:</b> y = ${m.toFixed(4)}x + ${c.toFixed(4)}</p>
         
          <div class="predictionDiv">
            <button id="predictionBtn">Make Prediction</button>
            <div id="predictionContainer"></div>
          </div>
          <br>
          <button id="newCalcBtn">New Calculation</button>
        </div>`;

      let predictionButton = document.getElementById("predictionBtn");
      
      
      let predictionInputActive = false;
      
      predictionButton.addEventListener('click', () => {
        
        if (predictionInputActive) return;
        
      
        cleanUpPredictionElements();
        
     
        let predictionContainer = document.getElementById("predictionContainer");
        let predictionInput = document.createElement("input");
        predictionInput.type = "text";
        predictionInput.placeholder = "Enter value of x and press Enter";
        predictionInput.id = "predictionInput";
        predictionButton.style.marginTop="20px"
        predictionButton.style.marginBottom="20px"
        predictionInput.required = true;
        predictionContainer.appendChild(predictionInput);
        predictionInput.focus(); 
        
        predictionInputActive = true;
   
        predictionInput.addEventListener("keydown", function(event) {
          if (event.key === "Enter") {
            const xValue = parseFloat(predictionInput.value);
            
            if (isNaN(xValue)) {
              
              alert("Please enter a valid numeric value for X");
              return;
            }
              
            const predictedY = m * xValue + c;
              
            
            const resultDiv = document.createElement("div");
            resultDiv.style.margin="10px"
            resultDiv.innerHTML = `<strong>If X = ${xValue}, then Y = <mark>${predictedY.toFixed(4)}</mark></strong>`;
            resultDiv.className = "prediction-result";
            
            
            predictionContainer.appendChild(resultDiv);        
            predictionInput.value = "";
          }
        });
      });

      
      document.getElementById("newCalcBtn").addEventListener("click", () => {
        numberOfRows.value = "";
        document.getElementById("dataBody").innerHTML = "";
        tableHeader.innerHTML = "";
        resultField.innerHTML = "";
        calculateButtonContainer.innerHTML = "";        

        cleanUpPredictionElements();      
        body.appendChild(dynamicRows);
      });
    });
  }
}); </script>
</body>
</html>
